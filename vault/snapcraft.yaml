name: vault-elopio
version: master
summary: Vault is a tool for securely accessing secrets.
description: |
  A modern system requires access to a multitude of secrets: database
  credentials, API keys for external services, credentials for service-oriented
  architecture communication, etc. Understanding who is accessing what secrets
  is already very difficult and platform-specific. Adding on key rolling,
  secure storage, and detailed audit logs is almost impossible without a custom
  solution. This is where Vault steps in.
confinement: strict

apps:
  vault:
    command: bin/vault
    plugs: [network, network-bind]

parts:
  vault:
    source: https://github.com/hashicorp/vault.git
    source-tag: master
    plugin: go
    go-importpath: github.com/hashicorp/vault
    go-buildtags: [vault]
    build-packages: [git, g++, libsasl2-dev]
    after: [go1.7]
  go1.7:
    plugin: nil
    build-packages: [golang-go]
    source: https://go.googlesource.com/go
    source-type: git
    source-tag: go1.7.5
    build: cd src && env GOROOT_BOOTSTRAP=$(go env GOROOT | tr -d '\n') ./make.bash
    install: cp -R * $SNAPCRAFT_PART_INSTALL
    prime:
      - '-*'
